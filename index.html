<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>江西天气</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            padding: 40px 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
        }
        h1 {
            text-align: center;
            color: #667eea;
            font-size: 28px;
            margin-bottom: 30px;
            font-weight: 600;
        }
        select {
            width: 100%;
            padding: 16px 20px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            margin-bottom: 30px;
        }
        select:focus { outline: none; border-color: #667eea; }
        .weather-info { text-align: center; display: none; }
        .weather-info.show { display: block; }
        .city-name { font-size: 24px; color: #333; margin-bottom: 10px; }
        .temperature { font-size: 72px; font-weight: 700; color: #667eea; margin: 20px 0; }
        .weather-desc { font-size: 20px; color: #666; margin-bottom: 30px; }
        .details { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
        .detail-item { background: #f5f5f5; padding: 15px; border-radius: 12px; text-align: center; }
        .detail-label { font-size: 12px; color: #999; display: block; margin-bottom: 5px; }
        .detail-value { font-size: 16px; color: #333; font-weight: 600; }
        .forecast-title { font-size: 18px; color: #333; margin-bottom: 15px; font-weight: 600; }
        .forecast-list { display: flex; flex-direction: column; gap: 10px; }
        .forecast-item { display: flex; justify-content: space-between; background: #f5f5f5; padding: 12px 16px; border-radius: 12px; }
        .forecast-date { font-size: 14px; color: #666; flex: 1; }
        .forecast-weather { font-size: 14px; color: #999; flex: 1; text-align: center; }
        .forecast-temp { font-size: 14px; color: #333; font-weight: 600; flex: 1; text-align: right; }
        .loading { text-align: center; color: #999; padding: 20px; }
    </style>
</head>
<body>
    <div class="card">
        <h1>🌤️ 江西天气</h1>
        <select id="citySelect"><option value="">选择城市...</option></select>
        <div id="weatherInfo" class="weather-info">
            <div class="city-name" id="cityName">--</div>
            <div class="temperature" id="temperature">--°</div>
            <div class="weather-desc" id="weatherDesc">--</div>
            <div class="details">
                <div class="detail-item"><span class="detail-label">体感</span><span class="detail-value" id="feelsLike">--°</span></div>
                <div class="detail-item"><span class="detail-label">湿度</span><span class="detail-value" id="humidity">--%</span></div>
                <div class="detail-item"><span class="detail-label">风速</span><span class="detail-value" id="windSpeed">--</span></div>
            </div>
            <div class="forecast-title">未来5天预报</div>
            <div class="forecast-list" id="forecastList"></div>
        </div>
        <div id="loading" class="loading" style="display: none;">加载中...</div>
    </div>
    <script>
        const CITIES = {
            // 南昌市（9个县级行政区）
            '南昌市': { lat: 28.6829, lon: 115.8579 },
            '东湖区': { lat: 28.6850, lon: 115.8990 },
            '西湖区': { lat: 28.6560, lon: 115.8770 },
            '青云谱区': { lat: 28.6210, lon: 115.9250 },
            '青山湖区': { lat: 28.6820, lon: 115.9620 },
            '新建区': { lat: 28.6920, lon: 115.8150 },
            '红谷滩区': { lat: 28.6890, lon: 115.8580 },
            '南昌县': { lat: 28.5450, lon: 115.9440 },
            '安义县': { lat: 28.8440, lon: 115.5490 },
            '进贤县': { lat: 28.3760, lon: 116.2420 },

            // 九江市（13个县级行政区）
            '九江市': { lat: 29.7050, lon: 116.0014 },
            '浔阳区': { lat: 29.7280, lon: 115.9900 },
            '濂溪区': { lat: 29.6670, lon: 115.9890 },
            '柴桑区': { lat: 29.6050, lon: 115.9110 },
            '武宁县': { lat: 29.2560, lon: 115.1000 },
            '修水县': { lat: 29.0250, lon: 114.5470 },
            '永修县': { lat: 29.0210, lon: 115.8090 },
            '德安县': { lat: 29.3140, lon: 115.7560 },
            '都昌县': { lat: 29.2730, lon: 116.2040 },
            '湖口县': { lat: 29.7380, lon: 116.2520 },
            '彭泽县': { lat: 29.8960, lon: 116.5490 },
            '瑞昌市': { lat: 29.6750, lon: 115.6810 },
            '共青城市': { lat: 29.2480, lon: 115.8010 },
            '庐山市': { lat: 29.4480, lon: 116.0450 },

            // 景德镇市（4个县级行政区）
            '景德镇市': { lat: 29.2742, lon: 117.1780 },
            '昌江区': { lat: 29.2730, lon: 117.1840 },
            '珠山区': { lat: 29.3010, lon: 117.2020 },
            '浮梁县': { lat: 29.3520, lon: 117.2150 },
            '乐平市': { lat: 28.9620, lon: 117.1290 },

            // 萍乡市（5个县级行政区）
            '萍乡市': { lat: 27.6229, lon: 113.8520 },
            '安源区': { lat: 27.6150, lon: 113.8700 },
            '湘东区': { lat: 27.6400, lon: 113.7330 },
            '莲花县': { lat: 27.1270, lon: 113.9610 },
            '上栗县': { lat: 27.8800, lon: 113.7950 },
            '芦溪县': { lat: 27.6310, lon: 114.0290 },

            // 新余市（2个县级行政区）
            '新余市': { lat: 27.8175, lon: 114.9167 },
            '渝水区': { lat: 27.8000, lon: 114.9440 },
            '分宜县': { lat: 27.8140, lon: 114.6920 },

            // 鹰潭市（3个县级行政区）
            '鹰潭市': { lat: 28.2386, lon: 117.0692 },
            '月湖区': { lat: 28.2380, lon: 117.1020 },
            '余江区': { lat: 28.2100, lon: 116.8180 },
            '贵溪市': { lat: 28.2920, lon: 117.2450 },

            // 赣州市（18个县级行政区）
            '赣州市': { lat: 25.8311, lon: 114.9335 },
            '章贡区': { lat: 25.8170, lon: 114.9210 },
            '南康区': { lat: 25.6610, lon: 114.7650 },
            '赣县区': { lat: 25.8600, lon: 115.0120 },
            '信丰县': { lat: 25.3860, lon: 114.9230 },
            '大余县': { lat: 25.4010, lon: 114.3620 },
            '上犹县': { lat: 25.7850, lon: 114.5510 },
            '崇义县': { lat: 25.6810, lon: 114.3080 },
            '安远县': { lat: 25.1370, lon: 115.3940 },
            '龙南市': { lat: 24.9110, lon: 114.7890 },
            '定南县': { lat: 24.7840, lon: 115.0280 },
            '全南县': { lat: 24.7420, lon: 114.5300 },
            '宁都县': { lat: 26.4700, lon: 116.0090 },
            '于都县': { lat: 25.9520, lon: 115.4150 },
            '兴国县': { lat: 26.3380, lon: 115.3630 },
            '会昌县': { lat: 25.6000, lon: 115.7860 },
            '寻乌县': { lat: 24.9640, lon: 115.6480 },
            '石城县': { lat: 26.3140, lon: 116.3440 },
            '瑞金市': { lat: 25.8850, lon: 116.0270 },

            // 吉安市（13个县级行政区）
            '吉安市': { lat: 27.1138, lon: 114.9926 },
            '吉州区': { lat: 27.1430, lon: 114.9750 },
            '青原区': { lat: 27.0810, lon: 115.0140 },
            '吉安县': { lat: 27.0400, lon: 114.9080 },
            '吉水县': { lat: 27.2290, lon: 115.1350 },
            '峡江县': { lat: 27.5820, lon: 115.3170 },
            '新干县': { lat: 27.7400, lon: 115.3930 },
            '永丰县': { lat: 27.3180, lon: 115.4420 },
            '泰和县': { lat: 26.7910, lon: 114.9080 },
            '遂川县': { lat: 26.3130, lon: 114.5200 },
            '万安县': { lat: 26.4580, lon: 114.7860 },
            '安福县': { lat: 27.3930, lon: 114.6200 },
            '永新县': { lat: 26.9450, lon: 114.2420 },
            '井冈山市': { lat: 26.7480, lon: 114.2890 },

            // 宜春市（10个县级行政区）
            '宜春市': { lat: 27.8153, lon: 114.4167 },
            '袁州区': { lat: 27.7970, lon: 114.4330 },
            '奉新县': { lat: 28.6880, lon: 115.4000 },
            '万载县': { lat: 28.1050, lon: 114.4450 },
            '上高县': { lat: 28.2340, lon: 114.9240 },
            '宜丰县': { lat: 28.3940, lon: 114.8000 },
            '靖安县': { lat: 28.8610, lon: 115.3630 },
            '铜鼓县': { lat: 28.5210, lon: 114.3700 },
            '丰城市': { lat: 28.1590, lon: 115.7710 },
            '樟树市': { lat: 28.0550, lon: 115.5460 },
            '高安市': { lat: 28.4170, lon: 115.3750 },

            // 抚州市（11个县级行政区）
            '抚州市': { lat: 27.9484, lon: 116.3583 },
            '临川区': { lat: 27.9770, lon: 116.3130 },
            '东乡区': { lat: 28.2360, lon: 116.5900 },
            '南城县': { lat: 27.5540, lon: 116.6370 },
            '黎川县': { lat: 27.2820, lon: 116.9070 },
            '南丰县': { lat: 27.2180, lon: 116.5250 },
            '崇仁县': { lat: 27.7540, lon: 116.0750 },
            '乐安县': { lat: 27.4280, lon: 115.8310 },
            '宜黄县': { lat: 27.5540, lon: 116.2360 },
            '金溪县': { lat: 27.9190, lon: 116.7540 },
            '资溪县': { lat: 27.7050, lon: 117.0690 },
            '广昌县': { lat: 26.8340, lon: 116.3260 },

            // 上饶市（12个县级行政区）
            '上饶市': { lat: 28.4544, lon: 117.9434 },
            '信州区': { lat: 28.4310, lon: 117.9660 },
            '广丰区': { lat: 28.4360, lon: 118.1910 },
            '广信区': { lat: 28.4490, lon: 117.9090 },
            '玉山县': { lat: 28.6820, lon: 118.2450 },
            '铅山县': { lat: 28.3150, lon: 117.7090 },
            '横峰县': { lat: 28.4070, lon: 117.5960 },
            '弋阳县': { lat: 28.3740, lon: 117.4490 },
            '余干县': { lat: 28.7020, lon: 116.6950 },
            '鄱阳县': { lat: 29.0110, lon: 116.6990 },
            '万年县': { lat: 28.6950, lon: 117.0680 },
            '婺源县': { lat: 29.2480, lon: 117.8610 },
            '德兴市': { lat: 28.9470, lon: 117.5790 }
        };
        function getWeatherDesc(code) {
            const w = { 0: '晴天', 1: '晴天', 2: '多云', 3: '阴天', 45: '雾', 48: '雾凇',
                51: '小雨', 53: '中雨', 55: '大雨', 61: '小雨', 63: '中雨', 65: '大雨',
                71: '小雪', 73: '中雪', 75: '大雪', 80: '阵雨', 81: '阵雨', 82: '暴雨',
                95: '雷暴', 96: '雷暴', 99: '雷暴' };
            return w[code] || '未知';
        }

        // 按地级市分组
        const cityGroups = {
            '南昌市': ['南昌市', '东湖区', '西湖区', '青云谱区', '青山湖区', '新建区', '红谷滩区', '南昌县', '安义县', '进贤县'],
            '九江市': ['九江市', '浔阳区', '濂溪区', '柴桑区', '武宁县', '修水县', '永修县', '德安县', '都昌县', '湖口县', '彭泽县', '瑞昌市', '共青城市', '庐山市'],
            '景德镇市': ['景德镇市', '昌江区', '珠山区', '浮梁县', '乐平市'],
            '萍乡市': ['萍乡市', '安源区', '湘东区', '莲花县', '上栗县', '芦溪县'],
            '新余市': ['新余市', '渝水区', '分宜县'],
            '鹰潭市': ['鹰潭市', '月湖区', '余江区', '贵溪市'],
            '赣州市': ['赣州市', '章贡区', '南康区', '赣县区', '信丰县', '大余县', '上犹县', '崇义县', '安远县', '龙南市', '定南县', '全南县', '宁都县', '于都县', '兴国县', '会昌县', '寻乌县', '石城县', '瑞金市'],
            '吉安市': ['吉安市', '吉州区', '青原区', '吉安县', '吉水县', '峡江县', '新干县', '永丰县', '泰和县', '遂川县', '万安县', '安福县', '永新县', '井冈山市'],
            '宜春市': ['宜春市', '袁州区', '奉新县', '万载县', '上高县', '宜丰县', '靖安县', '铜鼓县', '丰城市', '樟树市', '高安市'],
            '抚州市': ['抚州市', '临川区', '东乡区', '南城县', '黎川县', '南丰县', '崇仁县', '乐安县', '宜黄县', '金溪县', '资溪县', '广昌县'],
            '上饶市': ['上饶市', '信州区', '广丰区', '广信区', '玉山县', '铅山县', '横峰县', '弋阳县', '余干县', '鄱阳县', '万年县', '婺源县', '德兴市']
        };

        const select = document.getElementById('citySelect');
        Object.keys(cityGroups).forEach(groupName => {
            const optgroup = document.createElement('optgroup');
            optgroup.label = groupName;
            cityGroups[groupName].forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                optgroup.appendChild(option);
            });
            select.appendChild(optgroup);
        });
        async function fetchWeather(city) {
            const coords = CITIES[city];
            if (!coords) return;
            const loading = document.getElementById('loading');
            const weatherInfo = document.getElementById('weatherInfo');
            loading.style.display = 'block';
            weatherInfo.classList.remove('show');
            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${coords.lat}&longitude=${coords.lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia/Shanghai&forecast_days=6`;
                const response = await fetch(url);
                const data = await response.json();
                document.getElementById('cityName').textContent = city;
                document.getElementById('temperature').textContent = Math.round(data.current.temperature_2m) + '°';
                document.getElementById('weatherDesc').textContent = getWeatherDesc(data.current.weather_code);
                document.getElementById('feelsLike').textContent = Math.round(data.current.apparent_temperature) + '°';
                document.getElementById('humidity').textContent = data.current.relative_humidity_2m + '%';
                document.getElementById('windSpeed').textContent = Math.round(data.current.wind_speed_10m) + 'km/h';
                const forecastList = document.getElementById('forecastList');
                forecastList.innerHTML = '';
                for (let i = 1; i <= 5; i++) {
                    const date = new Date(data.daily.time[i]);
                    const dateStr = `${date.getMonth() + 1}月${date.getDate()}日`;
                    const weather = getWeatherDesc(data.daily.weather_code[i]);
                    const tempMax = Math.round(data.daily.temperature_2m_max[i]);
                    const tempMin = Math.round(data.daily.temperature_2m_min[i]);
                    const item = document.createElement('div');
                    item.className = 'forecast-item';
                    item.innerHTML = `<div class="forecast-date">${dateStr}</div><div class="forecast-weather">${weather}</div><div class="forecast-temp">${tempMin}° / ${tempMax}°</div>`;
                    forecastList.appendChild(item);
                }
                loading.style.display = 'none';
                weatherInfo.classList.add('show');
            } catch (error) {
                loading.style.display = 'none';
                alert('获取天气数据失败，请稍后重试');
            }
        }
        select.addEventListener('change', (e) => { if (e.target.value) fetchWeather(e.target.value); });
        select.value = '南昌市';
        fetchWeather('南昌市');
    </script>
</body>
</html>

